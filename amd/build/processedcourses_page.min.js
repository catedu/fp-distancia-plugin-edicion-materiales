define ("local_educaaragon/processedcourses_page",["jquery","core/str","core/ajax","core/modal_factory","core/modal_events","core/templates"],function(a,b,c,d,e,f){"use strict";var h={REPROCESSING_COURSE:"[data-action=\"reprocessing_course\"]"},i={PROCESSEDTABLE:"local_educaaragon_processed_table",REPROCESSING:"local_educaaragon_reprocessing"},j={CONTENT_TABLE:"[data-region=\"educaaragon-processedcourses\"]",TABLE:"[data-region=\"processedcourses-table\"]"},k={TABLE:"local_educaaragon/processedcourses_table",LOADING:"core/overlay_loading"};function g(b){this.node=a(b);this.initReprocessingCourse()}g.prototype.node=null;g.prototype.initReprocessingCourse=function(){this.node.find(h.REPROCESSING_COURSE).on("click",this.reprocessingCourse)};g.prototype.reprocessingCourse=function(g){g.preventDefault();g.stopPropagation();var h=a(g.currentTarget).attr("data-courseid");b.get_strings([{key:"reprocessing",component:"local_educaaragon"},{key:"reprocessingmsg",component:"local_educaaragon"},{key:"reprocess",component:"local_educaaragon"}]).then(function(b){var g=b[0],l=b[1],m=b[2];return d.create({title:g,body:l,type:d.types.SAVE_CANCEL}).then(function(b){b.setSaveButtonText(m);b.getRoot().on(e.save,function(){var b=a(j.TABLE);f.render(k.LOADING,{visible:!0}).done(function(a){b.append(a);var d={methodname:i.REPROCESSING,args:{courseid:h}};c.call([d])[0].done(function(){var a={methodname:i.PROCESSEDTABLE,args:{}};c.call([a])[0].done(function(a){var c=k.TABLE;f.render(c,a).done(function(a,c){b.html(a);f.runTemplateJS(c);location.reload()})}).fail(Notification.exception)}).fail(Notification.exception)})});b.getRoot().on(e.hidden,function(){b.destroy()});return b})}).done(function(a){a.show()}).fail(Notification.exception)};return{initClicks:function initClicks(a){return new g(a)}}});
//# sourceMappingURL=processedcourses_page.min.js.map
